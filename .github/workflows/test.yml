on:
  workflow_call:

jobs:
  test:
    runs-on: ubuntu-latest

    steps: 
      - shell: bash
        name: update apt registry
        run: sudo apt update
      - shell: bash
        name: install webkit gtk
        run: sudo apt install libwebkit2gtk-4.1-dev
      - shell: bash
        name: install wails
        run: go install github.com/wailsapp/wails/v2/cmd/wails@latest
      - shell: bash
        name: build
        run: wails build -tags webkit2_41
      - shell: bash
        name: typecheck
        run: make typecheck
      - shell: bash
        name: lint
        run: make lint
      - shell: bash
        name: test
        run: make test
