name: "Build"
description: "Installs Wails (+ dependencies) and builds"
runs:
  using: composite
  steps:
    - uses: awalsh128/cache-apt-pkgs-action@latest
      if: runner.os == 'Linux'
      with:
        packages: libwebkit2gtk-4.1-dev
    - shell: bash
      if: runner.os == 'Linux'
      run: |
        go install github.com/wailsapp/wails/v2/cmd/wails@latest
        wails build -tags webkit2_41
    - shell: pwsh
      if: runner.os == 'Windows'
      run: |
        go install github.com/wailsapp/wails/v2/cmd/wails@latest
        wails build
    - shell: bash
      if: runner.os == 'macOS'
      run: |
        go install github.com/wailsapp/wails/v2/cmd/wails@latest
        wails build -platform darwin/universal
